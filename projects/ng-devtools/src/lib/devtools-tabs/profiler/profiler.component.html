<div class="profiler-wrapper">
  <mat-card [class.mat-elevation-z0]="true">
    <button
      mat-icon-button
      color="primary"
      matTooltip="Start recording"
      *ngIf="state !== 'recording'"
      (click)="startRecording()"
      class="profiler-control start-recording-button"
    >
      <mat-icon> circle </mat-icon>
    </button>
    <button
      mat-icon-button
      matTooltip="Stop recording"
      *ngIf="state === 'recording'"
      (click)="stopRecording()"
      class="profiler-control recording-button"
    >
      <mat-icon> circle </mat-icon>
    </button>
    <button
      mat-icon-button
      color="primary"
      matTooltip="Clear current frames"
      *ngIf="state === 'recording'; else discardRecordingButton"
      (click)="resetBuffer()"
      class="profiler-control discard-button"
    >
      <mat-icon> not_interested </mat-icon>
    </button>
    <ng-template #discardRecordingButton>
      <button
        mat-icon-button
        color="primary"
        matTooltip="Exit profiler"
        *ngIf="state === 'visualizing'"
        (click)="discardRecording()"
        class="profiler-control discard-button"
      >
        <mat-icon> not_interested </mat-icon>
      </button>
    </ng-template>
    <span class="instructions idle" [class.hidden]="state !== 'idle'">
      <span> Click the play button to start a new recording, or upload a json file containing profiler data. </span>
      <span>
        <input type="file" (change)="importProfilerResults($event)" placeholder="Upload file" accept=".json" />
      </span>
    </span>
    <span class="instructions" [class.hidden]="state !== 'recording'">
      Click the profiling button to stop profiling. Click the clear button to remove existing profiler frames.
    </span>
    <span class="instructions" [class.hidden]="state !== 'visualizing'">
      Click the profiling button to resume profiling. Click the clear button to go back to the profiler menu. Click
      <q>Save Profile</q> to save your recording.
    </span>
  </mat-card>
  <div id="profiler-content-wrapper">
    <div class="visualization" *ngIf="state !== 'idle'">
      <ng-recording-timeline [stream]="stream" (exportProfile)="exportProfilerResults()"> </ng-recording-timeline>
    </div>
  </div>
</div>
